/* https://github.com/naniwa23/eztpl */var eztpl=function a(b,c){"strict";function d(a){return new RegExp(i.placeholder[0]+a+i.placeholder[1],"gm")}function e(a){var b=i.placeholder_block[0].replace("placeholder_name",a),c=i.placeholder_block[1].replace("placeholder_name",a);return new RegExp(b+"(.*?)"+c,"gm")}function f(a){var b=i.block[0].replace("blockname",a),c=i.block[1].replace("blockname",a);return new RegExp(b+"(.*?)"+c,"gm")}function g(a){return new RegExp(i.specials[0]+a+i.specials[1],"gm")}var h={},i=function(a){var b,c={remove_whitespaces:!0,placeholder:["::","::"],placeholder_block:["::=placeholder_name>::","::<placeholder_name=::"],block:["::>blockname>::","::<blockname<::"],specials:["__","__"]};for(b in c)c.hasOwnProperty(b)&&a.hasOwnProperty(b)&&(c[b]=a[b]);return c}("object"==typeof c&&null!==c?c:{});return i.remove_whitespaces&&(b=b.replace(/(\n|\r|\t)*/gm,"")),h.setPlaceholderDelimiter=function(a,b){"string"==typeof a&&"string"==typeof b&&(i.placeholder=[a,b])},h.setPlaceholderBlockDelimiter=function(a,b){"string"==typeof a&&"string"==typeof b&&(i.placeholder_block=[a,b])},h.setBlockDelimiter=function(a,b){"string"==typeof a&&"string"==typeof b&&(i.block=[a,b])},h.replace=function(i,j){var k,l,m,n,o,p,q,r;if(i instanceof Object)for(q in i)i.hasOwnProperty(q)&&h.replace(q,i[q]);else if("string"==typeof i)if(j instanceof Array||j instanceof Object){if(k=f(i),l=b.match(k)){if(l=l[0],m="",l){for(r=g("(index|rindex|even|odd)").test(l),o=0,p=j.length;p>o;o++)n=new a(l,c),n.replace(j[o]),m+=n.getTpl(),r&&(m=m.replace(g("index"),o+1),m=m.replace(g("rindex"),p-o),m=m.replace(g("even"),o%2?0:1),m=m.replace(g("odd"),o%2));b=b.replace(k,m),b=b.replace(g(i+"_count"),p)}k=f(i),b=b.replace(k,"$1")}}else k=e(i),l=b.match(k),l?!1===j||""===j?b=b.replace(e(i),""):(b=b.replace(d(i),j),k=e(i),b=b.replace(k,"$1")):!1===j||""===j?(b=b.replace(d(i),""),b=b.replace(k,""),b=b.replace(f(i),"")):(b=b.replace(d(i),j),b=b.replace(k,"$1"))},h.delPlaceholder=function(a){b="string"==typeof a?b.replace(d(a),""):b.replace(d(".*?"),"")},h.delPlaceholderBlock=function(a){b="string"==typeof a?b.replace(e(a),""):b.replace(e(".*?"),"")},h.delBlock=function(a){b="string"==typeof a?b.replace(f(a),""):b.replace(f(".*?"),"")},h.clear=function(){h.delBlock(),h.delPlaceholderBlock(),h.delPlaceholder()},h.getTpl=function(a){var c,d;return a?(c=f(a),d=b.match(c)[0],d.replace(c,"$1")):b},h};"object"==typeof module&&"undefined"!=typeof module.exports&&(module.exports=eztpl);